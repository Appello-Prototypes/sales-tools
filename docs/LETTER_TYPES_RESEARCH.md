# Letter Types Research & Implementation Guide

## Overview

This document outlines the comprehensive letter types needed for Appello's sales outreach, focusing on flexibility and deep personalization using ATLAS, HubSpot, and internet research data.

## Core Principle

**Always check HubSpot first** for existing relationship data (contacts, deals, meetings, emails, notes) before generating any letter. This ensures we leverage existing relationships and avoid redundant outreach.

---

## Letter Type Categories

### 1. **Cold Outreach** (No Prior Relationship)

#### 1.1 Cold Call / Initial Introduction
**Purpose:** First contact with a potential customer who has no prior relationship with Appello.

**When to Use:**
- No contacts in HubSpot for this company
- No previous deals or meetings
- Company identified through prospecting

**Data Sources & Queries:**

**HubSpot Checks:**
- Check for any existing contacts at company
- Check for any historical deals (even closed/lost)
- Check for any notes or activities

**ATLAS Queries:**
```
1. "Find customers similar to [companyName] in [industry]"
2. "Case studies for [trade] contractors solving [common pain points]"
3. "Success stories for [industry] companies with [companySize] employees"
4. "Similar customers in [location] using Appello"
```

**Internet Research:**
```
1. Recent news about [companyName]
2. [companyName] company updates and announcements
3. [industry] trends affecting [companyName]
4. [companyName] leadership changes or growth
5. [location] construction industry news
```

**Personalization Focus:**
- Industry-specific challenges
- Company size and scale
- Geographic location
- Recent company news/events

---

### 2. **Warm Outreach** (Existing Relationship, No Active Deal)

#### 2.1 Re-Engagement / Win-Back
**Purpose:** Reconnect with companies that previously engaged but haven't moved forward.

**When to Use:**
- Company has contacts in HubSpot
- Previous meetings or emails exist
- No active deals OR all deals are closed/lost
- Last interaction was 30+ days ago

**Data Sources & Queries:**

**HubSpot Checks (CRITICAL):**
- Review all past emails (subject, content, responses)
- Review meeting notes and outcomes
- Check deal history (why deals closed/lost)
- Review contact engagement history
- Check last activity date
- Review any notes about objections or concerns

**ATLAS Queries:**
```
1. "Case studies for companies that re-engaged after initial evaluation"
2. "Success stories for [trade] contractors who overcame [specific objection from HubSpot notes]"
3. "Similar customers who initially hesitated but later adopted Appello"
4. "ROI examples for companies like [companyName]"
```

**Internet Research:**
```
1. [companyName] recent business changes or growth
2. [companyName] new projects or contracts
3. [industry] challenges that may have changed since last contact
4. [companyName] technology adoption news
```

**Personalization Focus:**
- Reference specific past conversations
- Address previous objections or concerns
- Highlight what's changed since last contact
- Reference specific pain points discussed

---

#### 2.2 Nurture / Stay-in-Touch
**Purpose:** Maintain relationship with companies that aren't ready to buy but show interest.

**When to Use:**
- Active relationship exists
- Regular but infrequent contact
- Company expressed interest but timing wasn't right
- No active deal currently

**Data Sources & Queries:**

**HubSpot Checks:**
- Review engagement history (email opens, link clicks)
- Check for specific interests mentioned
- Review meeting notes for timing concerns
- Check contact preferences

**ATLAS Queries:**
```
1. "New case studies since [last contact date]"
2. "Recent success stories for [trade] contractors"
3. "Updated ROI data for similar companies"
4. "New features or capabilities relevant to [companyName]"
```

**Internet Research:**
```
1. [companyName] business updates
2. [industry] trends and changes
3. [companyName] competitive landscape changes
4. Regulatory changes affecting [industry]
```

**Personalization Focus:**
- Acknowledge ongoing relationship
- Share new relevant information
- Reference previous interests
- Low-pressure, value-focused messaging

---

### 3. **Active Opportunity** (Deal in Progress)

#### 3.1 Deal Advancement / Unstuck
**Purpose:** Move a stalled deal forward by addressing blockers or providing new information.

**When to Use:**
- Active deal exists in HubSpot
- Deal hasn't progressed in 14+ days
- Deal is in middle stages (not closed/lost)

**Data Sources & Queries:**

**HubSpot Checks (CRITICAL):**
- Review deal stage and pipeline
- Check deal notes for blockers or concerns
- Review recent activities and emails
- Check for competitor mentions
- Review decision-maker information
- Check deal amount and timeline

**ATLAS Queries:**
```
1. "Case studies addressing [specific blocker from deal notes]"
2. "Success stories for companies similar to [companyName] at [deal stage]"
3. "ROI calculations for [deal amount] sized implementations"
4. "Implementation timelines for companies like [companyName]"
5. "Overcoming [specific objection] for [trade] contractors"
```

**Internet Research:**
```
1. [companyName] recent business developments
2. [industry] changes affecting decision timing
3. Competitive intelligence on [competitor mentioned]
4. [companyName] financial or growth news
```

**Personalization Focus:**
- Address specific deal blockers
- Reference deal timeline and urgency
- Provide relevant case studies
- Address decision-maker concerns

---

#### 3.2 Proposal Follow-Up
**Purpose:** Follow up after sending a proposal or quote to move toward close.

**When to Use:**
- Proposal/quote sent recently (within 7 days)
- Deal in late stages (proposal/negotiation)
- No response to proposal

**Data Sources & Queries:**

**HubSpot Checks:**
- Review proposal details and pricing
- Check for questions or concerns
- Review decision timeline
- Check stakeholder information

**ATLAS Queries:**
```
1. "Case studies for companies with similar proposal scope"
2. "Success metrics for [proposed solution] implementations"
3. "ROI validation for [proposed investment amount]"
4. "Implementation success stories matching [proposed timeline]"
```

**Internet Research:**
```
1. [companyName] budget or planning cycles
2. [industry] seasonal factors affecting decisions
3. [companyName] recent strategic initiatives
```

**Personalization Focus:**
- Reference specific proposal elements
- Address potential concerns
- Provide social proof
- Create urgency around timeline

---

#### 3.3 Competitive Displacement
**Purpose:** Win deals where competitor is involved or replace existing solution.

**When to Use:**
- Competitor mentioned in deal notes
- Company using competing solution
- Deal notes indicate comparison shopping

**Data Sources & Queries:**

**HubSpot Checks:**
- Review competitor mentions
- Check for feature comparisons
- Review pricing discussions
- Check for migration concerns

**ATLAS Queries:**
```
1. "Case studies of companies switching from [competitor] to Appello"
2. "Migration success stories for [trade] contractors"
3. "Comparison: Appello vs [competitor] for [trade]"
4. "Companies that chose Appello over [competitor]"
```

**Internet Research:**
```
1. [competitor] recent news or changes
2. [competitor] customer complaints or issues
3. [industry] trends favoring Appello's approach
4. [companyName] technology strategy
```

**Personalization Focus:**
- Address competitor concerns directly
- Highlight differentiation
- Provide migration examples
- Focus on Appello advantages

---

### 4. **Post-Close** (Customer Success)

#### 4.1 Onboarding Check-In
**Purpose:** Support new customers during implementation and ensure success.

**When to Use:**
- Deal won recently (within 90 days)
- Customer in onboarding phase
- Regular check-in cadence

**Data Sources & Queries:**

**HubSpot Checks:**
- Review deal close date
- Check onboarding notes
- Review support tickets or issues
- Check contact engagement

**ATLAS Queries:**
```
1. "Onboarding best practices for [trade] contractors"
2. "Quick wins achieved by similar customers in first 90 days"
3. "Common onboarding challenges and solutions"
```

**Internet Research:**
```
1. [companyName] recent projects or growth
2. [industry] trends affecting implementation
```

**Personalization Focus:**
- Reference onboarding progress
- Provide quick-win examples
- Address any concerns
- Set expectations

---

#### 4.2 Expansion / Upsell
**Purpose:** Expand relationship with existing customers by adding features or users.

**When to Use:**
- Active customer (deal won, not churned)
- Customer using core features successfully
- Opportunity to expand usage

**Data Sources & Queries:**

**HubSpot Checks:**
- Review customer success metrics
- Check feature usage (if available)
- Review support history
- Check renewal timeline

**ATLAS Queries:**
```
1. "Expansion success stories for [trade] contractors"
2. "ROI from additional Appello modules"
3. "Companies similar to [companyName] that expanded usage"
```

**Internet Research:**
```
1. [companyName] growth or expansion news
2. [companyName] new projects requiring more capacity
```

**Personalization Focus:**
- Reference current success
- Highlight expansion benefits
- Provide relevant examples
- Focus on ROI

---

### 5. **Event & Campaign Integration**

#### 5.1 Event Follow-Up
**Purpose:** Follow up after trade shows, webinars, or other events.

**When to Use:**
- Company attended event
- Event registration in HubSpot
- Post-event follow-up cadence

**Data Sources & Queries:**

**HubSpot Checks:**
- Review event attendance
- Check session interests
- Review event engagement

**ATLAS Queries:**
```
1. "Case studies relevant to [event topic]"
2. "Success stories for companies interested in [event topic]"
```

**Internet Research:**
```
1. [event] follow-up content or recordings
2. [industry] trends discussed at event
```

**Personalization Focus:**
- Reference specific event sessions
- Address topics of interest
- Provide follow-up resources

---

#### 5.2 Campaign Integration Letter
**Purpose:** Letter included with marketing collateral, direct mail, or other campaigns.

**When to Use:**
- Part of broader marketing campaign
- Included with physical materials
- Coordinated multi-channel outreach

**Data Sources & Queries:**

**HubSpot Checks:**
- Review campaign participation
- Check previous campaign responses
- Review contact preferences

**ATLAS Queries:**
```
1. "Case studies relevant to [campaign theme]"
2. "Success stories matching [campaign offer]"
```

**Internet Research:**
```
1. [companyName] relevance to campaign
2. [industry] trends supporting campaign message
```

**Personalization Focus:**
- Tie letter to campaign theme
- Reference included materials
- Provide campaign-specific value
- Clear call-to-action

---

## Data Query Templates

### HubSpot Query Checklist (Always Run First)

```typescript
interface HubSpotDataCheck {
  // Contact Information
  contacts: {
    primaryContact: Contact;
    allContacts: Contact[];
    decisionMakers: Contact[];
  };
  
  // Deal Information
  deals: {
    activeDeals: Deal[];
    closedDeals: Deal[];
    lostDeals: Deal[];
    dealStages: string[];
    dealAmounts: number[];
    dealTimelines: Date[];
  };
  
  // Activity History
  activities: {
    emails: Email[];
    meetings: Meeting[];
    calls: Call[];
    notes: Note[];
    tasks: Task[];
  };
  
  // Engagement Metrics
  engagement: {
    lastContactDate: Date;
    emailOpenRate: number;
    emailClickRate: number;
    meetingFrequency: number;
  };
  
  // Relationship Context
  context: {
    relationshipLength: number;
    primaryPainPoints: string[];
    objections: string[];
    interests: string[];
    competitors: string[];
  };
}
```

### ATLAS Query Templates by Letter Type

```typescript
interface ATLASQueries {
  coldCall: [
    "Find customers similar to {companyName} in {industry}",
    "Case studies for {trade} contractors solving {painPoints}",
    "Success stories for {industry} companies with {companySize} employees"
  ];
  
  reEngagement: [
    "Case studies for companies that re-engaged after initial evaluation",
    "Success stories for {trade} contractors who overcame {objection}",
    "Similar customers who initially hesitated but later adopted Appello"
  ];
  
  dealAdvancement: [
    "Case studies addressing {blocker}",
    "Success stories for companies similar to {companyName} at {dealStage}",
    "ROI calculations for {dealAmount} sized implementations"
  ];
  
  competitiveDisplacement: [
    "Case studies of companies switching from {competitor} to Appello",
    "Migration success stories for {trade} contractors",
    "Comparison: Appello vs {competitor} for {trade}"
  ];
}
```

### Internet Research Query Templates

```typescript
interface InternetQueries {
  companyNews: [
    "Recent news about {companyName}",
    "{companyName} company updates and announcements",
    "{companyName} leadership changes or growth"
  ];
  
  industryTrends: [
    "{industry} trends affecting {companyName}",
    "{location} construction industry news",
    "Regulatory changes affecting {industry}"
  ];
  
  competitiveIntel: [
    "{competitor} recent news or changes",
    "{competitor} customer complaints or issues",
    "{industry} trends favoring Appello's approach"
  ];
}
```

---

## Implementation Priority

### Phase 1: Core Types (Immediate)
1. **Cold Call** - Already exists, enhance with better queries
2. **Re-Engagement** - Critical for existing relationships
3. **Deal Advancement** - Essential for active opportunities

### Phase 2: Relationship Management (Short-term)
4. **Nurture / Stay-in-Touch** - Maintain warm relationships
5. **Proposal Follow-Up** - Close more deals
6. **Competitive Displacement** - Win competitive deals

### Phase 3: Customer Success (Medium-term)
7. **Onboarding Check-In** - Improve customer success
8. **Expansion / Upsell** - Grow customer value

### Phase 4: Campaign Integration (Long-term)
9. **Event Follow-Up** - Leverage events
10. **Campaign Integration** - Multi-channel campaigns

---

## Personalization Hierarchy

1. **HubSpot Relationship Data** (Highest Priority)
   - Past conversations and meetings
   - Deal history and stage
   - Objections and concerns
   - Engagement history

2. **ATLAS Intelligence** (High Priority)
   - Similar customer stories
   - Relevant case studies
   - Success metrics

3. **Internet Research** (Medium Priority)
   - Recent company news
   - Industry trends
   - Competitive intelligence

4. **Company Profile** (Base Level)
   - Industry, size, location
   - Basic company information

---

## Letter Type Configuration Schema

Each letter type should include:

```typescript
interface LetterTypeConfig {
  name: string;
  description: string;
  
  // HubSpot Data Requirements
  hubspotChecks: {
    required: string[]; // ['contacts', 'deals', 'activities']
    optional: string[]; // ['engagements', 'notes']
  };
  
  // ATLAS Query Templates
  atlasQueries: string[]; // Template strings with variables
  
  // Internet Research Queries
  internetQueries: string[]; // Template strings with variables
  
  // System Prompt
  systemPrompt: string; // AI instructions for this letter type
  
  // User Prompt Template
  userPromptTemplate: string; // Handlebars template with variables
  
  // Conditions for Use
  conditions: {
    requiresHubSpotData: boolean;
    requiresActiveDeal: boolean;
    requiresPastInteraction: boolean;
  };
}
```

---

## Next Steps

1. **Extend LetterType Model** - Add query templates and configuration
2. **Create Query Builder** - Dynamic query generation based on letter type
3. **Enhance HubSpot Integration** - Comprehensive data gathering
4. **Build Letter Type Selector** - Smart type selection based on HubSpot data
5. **Implement Personalization Engine** - Combine all data sources intelligently

---

## Notes

- **Always prioritize HubSpot data** - It contains the most relevant relationship context
- **ATLAS provides social proof** - Use for case studies and similar customer stories
- **Internet research adds timeliness** - Use for recent news and trends
- **Flexibility is key** - Letter types should be configurable and extensible
- **Context matters** - Same company may need different letter types at different times


